<%@ page import="com.oreilly.servlet.MultipartRequest" %>
<%@ page import="com.oreilly.servlet.multipart.DefaultFileRenamePolicy" %>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>7_uploadtoserver.jsp</title>
</head>
<body>

<h2>upload 하자 </h2>

<% 
        // 다중 파일을 올릴때 이걸 받을 곳을
        // ArrayList<String> arr1 = new ArrayList<String>(); 을 이용해서 받아도 되지만 생략해도 된다. 
        
        String bang = "/Users/mymac/Desktop/upbang"; // 프로젝트 내부가 아닌 외부 드라이브 폴더
        // 외부 드라이브가 없으므로 바탕화면 폴더로 함 
                                                                                                // 요청, 들어갈폴더(경로), 파일 최대 크기, 글 형식 지정 
        MultipartRequest mr1 = new MultipartRequest(request, bang, 10*1024*1024, "UTF-8", new DefaultFileRenamePolicy());
                                                                                        //request,saveFolder,maxSize,encType,new DefaultFileRenamePolicy()
        // 10*1024*1024 는 10MB  이하의 크기의 파일만 업로드 가능하게 지정한 것.
        // 똑같은 이름이 추가로 올라오면 먼저번 이름을 겹쳐 쓸건지 지금 걸 이름 바꿔서 할건지 물어봐야함.
        // 이때 필요한 것이 RenamePolocy() 임. 이걸 하면 자동으로 알아서 이름을 바꿔서 저장해줌. 

        // request를 사용 할 수 없으므로 대신 MultipartRequest 객체를 사용한다.
        // MultipartRequest 가 request 역할도 같이 하는 것임. 
        
        String virum1 = mr1.getParameter("irum1");

        out.println("사용자 이름은 " + virum1 + " 이시구요 "+ "<br>");
        out.println("추카추카 파일 올리기 성공 ");
        
%>
</body>
</html>