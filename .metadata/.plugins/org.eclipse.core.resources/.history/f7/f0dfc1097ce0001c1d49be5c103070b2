package telInfoDAO;

import java.sql.Connection;
import java.sql.Date;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;

import tellinfoDBConn.TelInfoDBConn;
import tellinfoVO.TelInfoVO;

public class TelInfoDAO {
	

    private Connection con;
    PreparedStatement pstmt = null;
    ResultSet rs = null;
    
    public TelInfoDAO()
                    throws ClassNotFoundException, SQLException {
            con = new TelInfoDBConn().getConnection();
    }
    
    //반환형  //메소드 3형식
    public ArrayList<TelInfoVO> getAllInfo() throws SQLException{
            ArrayList<TelInfoVO> tiarray = new ArrayList<TelInfoVO>();//generic
            
            String sql  ="SELECT * FROM TelTable5 ORDER BY id";
            pstmt = con.prepareStatement(sql);
            rs = pstmt.executeQuery();
            while(rs.next()) {
                    int id = rs.getInt("id");
                    String name = rs.getString("name");
                    String tel = rs.getString("tel");
                    Date d = rs.getDate("d"); // VO : util        DAO : sql
                    TelInfoVO tv = new TelInfoVO( id, name, tel,  d); // VO 생성자 활용
                    tiarray.add(tv); //ArrayList 컬레션에 객체 넣기
            }
            return tiarray; //전체내용이 들어있는 해당 컬렉션을 return
    }
	}
//db에서 dao로 끄집어내는건 DAO


